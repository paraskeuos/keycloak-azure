apiVersion: v1
kind: Pod
metadata:
  name: postgres-pod
spec:
  containers:
    - image: docker.io/library/postgres:18.0
      name: postgres
      ports:
        - containerPort: 5432
          hostPort: {{ pg_port }}
      env:
        - name: POSTGRES_DB
          value: {{ kc_db_name }}
        - name: POSTGRES_USER
          value: {{ kc_admin_username }}
        - name: POSTGRES_PASSWORD
          value: {{ kc_admin_password }}
        - name: PGDATA
          value: /var/lib/postgresql/data
      volumeMounts:
        - name: pg-vol
          mountPath: /var/lib/postgresql/data
  volumes:
    - name: pg-vol
      hostPath: 
        path: {{ work_dir }}/{{ pg_data_dir }}
        type: DirectoryOrCreate
